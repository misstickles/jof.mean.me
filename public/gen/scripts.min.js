!function(){function e(e,t){e.when("/",{templateUrl:"/maps/maps.view.html",controller:"mapsController",controllerAs:"vm"}).when("/maps",{templateUrl:"/maps/maps.view.html",controller:"mapsController",controllerAs:"vm"}).when("/about",{templateUrl:"/about/about.view.html",controller:"aboutController",controllerAs:"vm"}).otherwise({redirectTo:"/"}),t.html5Mode(!0)}angular.module("jofApp",["ngRoute"]),angular.module("jofApp").config(["$routeProvider","$locationProvider",e])}(),function(){function e(e,t){var n=this;n.pageHeader={image:"aboutHeader.jpg",title:"Jo Faircloth",description:"BEng(hons) BSc(hons) DIS CertWAD(open) CertAPS(open) MIET",buttonText:"OK, let's read it",linkId:"#about"}}angular.module("jofApp").controller("aboutController",e),e.$inject=["$scope","mapsData"]}(),function(){function e(e,t,n){var r=this;r.pageHeader={title:"Loc8r",strapline:"Find places to work with wifi near you!"},r.sidebar={content:"Looking for wifi and a seat? Loc8r helps you find places to work when out and about. Perhaps with coffee, cake or a pint? Let Loc8r help you find the place you're looking for."},r.message="Checking your location",r.getData=function(e){var n=e.coords.latitude,o=e.coords.longitude;r.message="Searching for nearby places",t.locationByCoords(n,o).success(function(e){r.message=e.length>0?"":"No locations found nearby",r.data={locations:e},console.log(r.data)}).error(function(e){r.message="Sorry, something's gone wrong, please try again later"})},r.showError=function(t){e.$apply(function(){r.message=t.message})},r.noGeo=function(){e.$apply(function(){r.message="Geolocation is not supported by this browser."})},n.getPosition(r.getData,r.showError,r.noGeo)}angular.module("jofApp").controller("homeCtrl",e),e.$inject=["$scope","loc8rData","geolocation"]}(),function(e,t){"use strict";function n(e,n,r){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(o,a,i,u,c){function s(){d&&(r.cancel(d),d=null),p&&(p.$destroy(),p=null),f&&(d=r.leave(f),d.then(function(){d=null}),f=null)}function l(){var i=e.current&&e.current.locals;if(t.isDefined(i&&i.$template)){var i=o.$new(),u=e.current;f=c(i,function(e){r.enter(e,null,f||a).then(function(){!t.isDefined(h)||h&&!o.$eval(h)||n()}),s()}),p=u.scope=i,p.$emit("$viewContentLoaded"),p.$eval(m)}else s()}var p,f,d,h=i.autoscroll,m=i.onload||"";o.$on("$routeChangeSuccess",l),l()}}}function r(e,t,n){return{restrict:"ECA",priority:-400,link:function(r,o){var a=n.current,i=a.locals;o.html(i.$template);var u=e(o.contents());if(a.controller){i.$scope=r;var c=t(a.controller,i);a.controllerAs&&(r[a.controllerAs]=c),o.data("$ngControllerController",c),o.children().data("$ngControllerController",c)}r[a.resolveAs||"$resolve"]=i,u(r)}}}var o=t.isArray,a=t.isObject,i=t.module("ngRoute",["ng"]).provider("$route",function(){function e(e,n){return t.extend(Object.create(e),n)}function n(e,t){var n=t.caseInsensitiveMatch,r={originalPath:e,regexp:e},o=r.keys=[];return e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[\?\*])?/g,function(e,t,n,r){return e="?"===r||"*?"===r?"?":null,r="*"===r||"*?"===r?"*":null,o.push({name:n,optional:!!e}),t=t||"",""+(e?"":t)+"(?:"+(e?t:"")+(r&&"(.+?)"||"([^/]+)")+(e||"")+")"+(e||"")}).replace(/([\/$\*])/g,"\\$1"),r.regexp=new RegExp("^"+e+"$",n?"i":""),r}var r={};this.when=function(e,i){var u;if(u=void 0,o(i)){u=u||[];for(var c=0,s=i.length;c<s;c++)u[c]=i[c]}else if(a(i))for(c in u=u||{},i)"$"===c.charAt(0)&&"$"===c.charAt(1)||(u[c]=i[c]);return u=u||i,t.isUndefined(u.reloadOnSearch)&&(u.reloadOnSearch=!0),t.isUndefined(u.caseInsensitiveMatch)&&(u.caseInsensitiveMatch=this.caseInsensitiveMatch),r[e]=t.extend(u,e&&n(e,u)),e&&(c="/"==e[e.length-1]?e.substr(0,e.length-1):e+"/",r[c]=t.extend({redirectTo:e},n(c,u))),this},this.caseInsensitiveMatch=!1,this.otherwise=function(e){return"string"==typeof e&&(e={redirectTo:e}),this.when(null,e),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(n,o,a,i,c,s,l){function p(e){var r=y.current;($=(v=m())&&r&&v.$$route===r.$$route&&t.equals(v.pathParams,r.pathParams)&&!v.reloadOnSearch&&!w)||!r&&!v||n.$broadcast("$routeChangeStart",v,r).defaultPrevented&&e&&e.preventDefault()}function f(){var e=y.current,r=v;$?(e.params=r.params,t.copy(e.params,a),n.$broadcast("$routeUpdate",e)):(r||e)&&(w=!1,(y.current=r)&&r.redirectTo&&(t.isString(r.redirectTo)?o.path(g(r.redirectTo,r.params)).search(r.params).replace():o.url(r.redirectTo(r.pathParams,o.path(),o.search())).replace()),i.when(r).then(d).then(function(o){r==y.current&&(r&&(r.locals=o,t.copy(r.params,a)),n.$broadcast("$routeChangeSuccess",r,e))},function(t){r==y.current&&n.$broadcast("$routeChangeError",r,e,t)}))}function d(e){if(e){var n=t.extend({},e.resolve);return t.forEach(n,function(e,r){n[r]=t.isString(e)?c.get(e):c.invoke(e,null,null,r)}),e=h(e),t.isDefined(e)&&(n.$template=e),i.all(n)}}function h(e){var n,r;return t.isDefined(n=e.template)?t.isFunction(n)&&(n=n(e.params)):t.isDefined(r=e.templateUrl)&&(t.isFunction(r)&&(r=r(e.params)),t.isDefined(r)&&(e.loadedTemplateUrl=l.valueOf(r),n=s(r))),n}function m(){var n,a;return t.forEach(r,function(r,i){var u;if(u=!a){var c=o.path();u=r.keys;var s={};if(r.regexp)if(c=r.regexp.exec(c)){for(var l=1,p=c.length;l<p;++l){var f=u[l-1],d=c[l];f&&d&&(s[f.name]=d)}u=s}else u=null;else u=null;u=n=u}u&&(a=e(r,{params:t.extend({},o.search(),n),pathParams:n}),a.$$route=r)}),a||r[null]&&e(r[null],{params:{},pathParams:{}})}function g(e,n){var r=[];return t.forEach((e||"").split(":"),function(e,t){if(0===t)r.push(e);else{var o=e.match(/(\w+)(?:[?*])?(.*)/),a=o[1];r.push(n[a]),r.push(o[2]||""),delete n[a]}}),r.join("")}var v,$,w=!1,y={routes:r,reload:function(){w=!0;var e={defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0,w=!1}};n.$evalAsync(function(){p(e),e.defaultPrevented||f()})},updateParams:function(e){if(!this.current||!this.current.$$route)throw u("norout");e=t.extend({},this.current.params,e),o.path(g(this.current.$$route.originalPath,e)),o.search(e)}};return n.$on("$locationChangeStart",p),n.$on("$locationChangeSuccess",f),y}]}),u=t.$$minErr("ngRoute");i.provider("$routeParams",function(){this.$get=function(){return{}}}),i.directive("ngView",n),i.directive("ngView",r),n.$inject=["$route","$anchorScroll","$animate"],r.$inject=["$compile","$controller","$route"]}(window,window.angular),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,n,r,o){return jQuery.easing[jQuery.easing.def](e,t,n,r,o)},easeInQuad:function(e,t,n,r,o){return r*(t/=o)*t+n},easeOutQuad:function(e,t,n,r,o){return-r*(t/=o)*(t-2)+n},easeInOutQuad:function(e,t,n,r,o){return(t/=o/2)<1?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,o){return r*(t/=o)*t*t+n},easeOutCubic:function(e,t,n,r,o){return r*((t=t/o-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,o){return(t/=o/2)<1?r/2*t*t*t+n:r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,o){return r*(t/=o)*t*t*t+n},easeOutQuart:function(e,t,n,r,o){return-r*((t=t/o-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,r,o){return(t/=o/2)<1?r/2*t*t*t*t+n:-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,o){return r*(t/=o)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,o){return r*((t=t/o-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,o){return(t/=o/2)<1?r/2*t*t*t*t*t+n:r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,o){return-r*Math.cos(t/o*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,o){return r*Math.sin(t/o*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,o){return-r/2*(Math.cos(Math.PI*t/o)-1)+n},easeInExpo:function(e,t,n,r,o){return 0==t?n:r*Math.pow(2,10*(t/o-1))+n},easeOutExpo:function(e,t,n,r,o){return t==o?n+r:r*(-Math.pow(2,-10*t/o)+1)+n},easeInOutExpo:function(e,t,n,r,o){return 0==t?n:t==o?n+r:(t/=o/2)<1?r/2*Math.pow(2,10*(t-1))+n:r/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,r,o){return-r*(Math.sqrt(1-(t/=o)*t)-1)+n},easeOutCirc:function(e,t,n,r,o){return r*Math.sqrt(1-(t=t/o-1)*t)+n},easeInOutCirc:function(e,t,n,r,o){return(t/=o/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+n:r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,o){var a=1.70158,i=0,u=r;if(0==t)return n;if(1==(t/=o))return n+r;if(i||(i=.3*o),u<Math.abs(r)){u=r;var a=i/4}else var a=i/(2*Math.PI)*Math.asin(r/u);return-(u*Math.pow(2,10*(t-=1))*Math.sin((t*o-a)*(2*Math.PI)/i))+n},easeOutElastic:function(e,t,n,r,o){var a=1.70158,i=0,u=r;if(0==t)return n;if(1==(t/=o))return n+r;if(i||(i=.3*o),u<Math.abs(r)){u=r;var a=i/4}else var a=i/(2*Math.PI)*Math.asin(r/u);return u*Math.pow(2,-10*t)*Math.sin((t*o-a)*(2*Math.PI)/i)+r+n},easeInOutElastic:function(e,t,n,r,o){var a=1.70158,i=0,u=r;if(0==t)return n;if(2==(t/=o/2))return n+r;if(i||(i=o*(.3*1.5)),u<Math.abs(r)){u=r;var a=i/4}else var a=i/(2*Math.PI)*Math.asin(r/u);return t<1?-.5*(u*Math.pow(2,10*(t-=1))*Math.sin((t*o-a)*(2*Math.PI)/i))+n:u*Math.pow(2,-10*(t-=1))*Math.sin((t*o-a)*(2*Math.PI)/i)*.5+r+n},easeInBack:function(e,t,n,r,o,a){return void 0==a&&(a=1.70158),r*(t/=o)*t*((a+1)*t-a)+n},easeOutBack:function(e,t,n,r,o,a){return void 0==a&&(a=1.70158),r*((t=t/o-1)*t*((a+1)*t+a)+1)+n},easeInOutBack:function(e,t,n,r,o,a){return void 0==a&&(a=1.70158),(t/=o/2)<1?r/2*(t*t*(((a*=1.525)+1)*t-a))+n:r/2*((t-=2)*t*(((a*=1.525)+1)*t+a)+2)+n},easeInBounce:function(e,t,n,r,o){return r-jQuery.easing.easeOutBounce(e,o-t,0,r,o)+n},easeOutBounce:function(e,t,n,r,o){return(t/=o)<1/2.75?r*(7.5625*t*t)+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(e,t,n,r,o){return t<o/2?.5*jQuery.easing.easeInBounce(e,2*t,0,r,o)+n:.5*jQuery.easing.easeOutBounce(e,2*t-o,0,r,o)+.5*r+n}}),function(){function e(e,t){var n=this;n.sortOrder=["-filename"],n.pageHeader={image:"mapHeader.jpg",title:"My Little Walks",description:"Come rain. Come shine. Just do it.",buttonText:"Go Walkies",linkId:"#maps"},n.getMaps=function(){n.message="Fetching some cool stuff.",t.maps().success(function(e){n.message=e.jsonData.length>0?"":"No cool stuff found.  Boo :o( <br><br>Please try clicking here: <a href='/maps' onclick='location.reload()'>Reload</a>",n.data={maps:e}}).error(function(e){n.message="Sorry, I'm having a tantrum, please try again later.  Error: "+e})},n.getMaps()}angular.module("jofApp").controller("mapsController",e),e.$inject=["$scope","mapsData"]}(),function(){function e(e,t,n){var r="https://maps.googleapis.com/maps/api/js?key=AIzaSyA4dd9bVUFlxCouni33X-NkNZSAZJfnzx0&callback=",o=e.defer();n.googleMapsInitialised=o.resolve;var a=function(e,t){var n=document.createElement("script");n.src=e+t,document.body.appendChild(n)};return a(r,"googleMapsInitialised"),{mapsInitialised:o.promise}}angular.module("jofApp").factory("googleMapsPromise",e),e.$inject=["$q","$rootScope","$window"]}(),function(){function e(e){return function(t){return e.trustAsHtml(t)}}angular.module("jofApp").filter("trusted",e),e.$inject=["$sce"]}(),function(){function e(e){var t=function(){return e.get("/api/maps")};return{maps:t}}angular.module("jofApp").service("mapsData",e),e.$inject=["$http"]}(),function(){function e(e,t){return{loadMaps:function(n){var r=t.defer(),o=[];return angular.forEach(n,function(t){o.push(e.get(t.jsonData))}),t.all(o).then(function(e){r.resolve(JSON.stringify(e))},function(e){r.reject(e)},function(e){r.update(e)}),r.promise}}}angular.module("jofApp").service("mapsDataAsync",e),e.$inject=["$http","$q"]}(),function(){function e(){return{restrict:"EA",scope:{content:"=content"},templateUrl:"/common/directives/chart/chart.template.html",link:t}}function t(e,t,n){function r(){var n=new google.visualization.DataTable;n.addColumn("datetime","X"),n.addColumn("number","Altitude");var r=e.content,o=[],a=new Date;$.each(r.gpx.trk[0].trkseg,function(e,t){o=[],$.each(t.trkpt,function(e,t){var n=Math.round(1e3*t.ele)/1e3,r=new Date(t.time);r.isValidDate()||(r=new Date(a.addSeconds(15)));var i=[r,n];o.push(i)})}),n.addRows(o);var i={hAxis:{title:"Time"},vAxis:{title:"Altitude (ft)"},width:"100%",height:"100%",colors:["#800000"],is3D:!0,legend:"none"},u=new google.visualization.LineChart(t[0].querySelector("#chart"));u.draw(n,i),$(window).resize(function(){u.draw(n,i)})}google.charts.setOnLoadCallback(r)}angular.module("jofApp").directive("chart",e),google.charts.load("current",{packages:["corechart","line"]})}(),function(){function e(){return{restrict:"A",scope:{scrollTo:"@"},link:function(e,t,n){t.on("click",function(){$("html, body").stop().animate({scrollTop:$(e.scrollTo).offset().top-50},1250,"easeInOutExpo"),event.preventDefault()})}}}angular.module("jofApp").directive("scrollOnClick",e)}(),function(){function e(){return{restrict:"EA",templateUrl:"/common/directives/myFooter/myFooter.template.html"}}angular.module("jofApp").directive("myFooter",e)}(),function(){function e(e){return{restrict:"EA",scope:{content:"=content"},templateUrl:"/common/directives/map/map.template.html",link:function(t,n,r){e.mapsInitialised.then(function(){var e={mapTypeId:google.maps.MapTypeId.TERRAIN,polyColours:["#800000","#008000"]},r=new google.maps.Map(n[0].querySelector("#map"),e),o=[],a=new google.maps.LatLngBounds,i=t.content;$.each(i.gpx.trk[0].trkseg,function(t,n){o=[],$.each(n.trkpt,function(e,t){var n=t.$.lat,r=t.$.lon,i=new google.maps.LatLng(n,r);o.push(i),a.extend(i)});var i=new google.maps.Polyline({path:o,strokeColor:e.polyColours[t],strokeOpacity:.7,strokeWeight:2});i.setMap(r)}),r.fitBounds(a),google.maps.event.addDomListener(window,"resize",function(){var e=r.getCenter();google.maps.event.trigger(r,"resize"),r.setCenter(e)})})}}}angular.module("jofApp").directive("map",e),e.$inject=["googleMapsPromise"]}(),function(){function e(){return{restrict:"EA",scope:{content:"=content"},templateUrl:"/common/directives/map/mapDetail.template.html",link:function(e,t,n){$('[data-toggle="tooltip"]').tooltip()}}}angular.module("jofApp").directive("mapDetail",e)}(),function(){function e(){return{restrict:"EA",templateUrl:"/common/directives/navigation/navigation.template.html",link:function(e,t,n){$("body").scrollspy({target:".navbar-fixed-top",offset:51}),$(".navbar-collapse ul li a:not(.dropdown-toggle)").click(function(){$(".navbar-toggle:visible").click()}),$("#mainNav").affix({offset:{top:200}})}}}angular.module("jofApp").directive("navigation",e)}(),function(){function e(){return{restrict:"EA",scope:{content:"=content"},templateUrl:"/common/directives/pageHeader/pageHeader.template.html"}}angular.module("jofApp").directive("pageHeader",e)}();